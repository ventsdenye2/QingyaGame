# Bossæˆ˜æ–—ç³»ç»Ÿåˆ†ææ–‡æ¡£ï¼ˆé‡æ„ç‰ˆï¼‰

## ğŸ“‹ ç›®å½•

1. [ç³»ç»Ÿæ¦‚è¿°](#ç³»ç»Ÿæ¦‚è¿°)
2. [æ ¸å¿ƒæ¶æ„](#æ ¸å¿ƒæ¶æ„)
3. [åºåˆ—é…ç½®ç³»ç»Ÿ](#åºåˆ—é…ç½®ç³»ç»Ÿ)
4. [åºåˆ—æ§åˆ¶å™¨](#åºåˆ—æ§åˆ¶å™¨)
5. [BossåŸºç±»](#bossåŸºç±»)
6. [å‘å°„æºç³»ç»Ÿ](#å‘å°„æºç³»ç»Ÿ)
7. [é˜¶æ®µç³»ç»Ÿ](#é˜¶æ®µç³»ç»Ÿ)
8. [æ”»å‡»ç±»å‹è¯¦è§£](#æ”»å‡»ç±»å‹è¯¦è§£)
9. [é…ç½®å’Œä½¿ç”¨](#é…ç½®å’Œä½¿ç”¨)
10. [æœ€ä½³å®è·µ](#æœ€ä½³å®è·µ)

---

## ç³»ç»Ÿæ¦‚è¿°

DodgeDotsçš„Bossæˆ˜æ–—ç³»ç»Ÿç»è¿‡é‡æ„ï¼Œç°åœ¨æ˜¯ä¸€ä¸ª**é«˜åº¦ç®€åŒ–ã€èŠ‚æ‹é©±åŠ¨**çš„å¼¹å¹•å°„å‡»æ¸¸æˆæ¡†æ¶ã€‚æ–°ç³»ç»Ÿçš„æ ¸å¿ƒç‰¹ç‚¹ï¼š

- âœ… **æ”»å‡»ä¸ç§»åŠ¨åˆ†ç¦»**ï¼šæ”»å‡»åºåˆ—å’Œç§»åŠ¨åºåˆ—ç‹¬ç«‹é…ç½®ï¼Œäº’ä¸å¹²æ‰°
- âœ… **ç»Ÿä¸€çš„èŠ‚æ‹é©±åŠ¨**ï¼šæ‰€æœ‰æ”»å‡»å’Œç§»åŠ¨éƒ½ç”±BeatMapèŠ‚æ‹äº‹ä»¶é©±åŠ¨
- âœ… **å¤šåºåˆ—å åŠ **ï¼šæ”¯æŒå¤šä¸ªåºåˆ—æ§åˆ¶å™¨åŒæ—¶è¿è¡Œï¼Œå®ç°å¤æ‚Bossè¡Œä¸º
- âœ… **å¤šå‘å°„æºç³»ç»Ÿ**ï¼šæ¯ä¸ªå‘å°„æºå¯ä»¥ç‹¬ç«‹ç§»åŠ¨å’Œæ”»å‡»
- âœ… **é˜¶æ®µç³»ç»Ÿ**ï¼šæ ¹æ®è¡€é‡è‡ªåŠ¨åˆ‡æ¢ä¸åŒçš„åºåˆ—æ§åˆ¶å™¨ç»„åˆ
- âœ… **çµæ´»çš„æ”»å‡»ç±»å‹**ï¼šåœ†å½¢ã€æ‰‡å½¢ã€å•å‘ã€è‡ªæœºç‹™ç­‰å¤šç§å¼¹å¹•æ¨¡å¼

### æ ¸å¿ƒè®¾è®¡ç†å¿µ

**ç®€åŒ–åŸåˆ™**ï¼š
- ç§»é™¤äº†å¤æ‚çš„è‡ªåŠ¨æ”»å‡»å¾ªç¯ç³»ç»Ÿ
- ç§»é™¤äº†æ”»å‡»å†…åµŒç§»åŠ¨ç³»ç»Ÿ
- ç§»é™¤äº†ç‹¬ç«‹çš„æ—¶é—´è½´ç§»åŠ¨ç³»ç»Ÿ
- ç»Ÿä¸€ä½¿ç”¨èŠ‚æ‹é©±åŠ¨ï¼Œæ¯ä¸ªèŠ‚æ‹æ‰§è¡Œä¸‹ä¸€ä¸ªæ”»å‡»å’Œä¸‹ä¸€ä¸ªç§»åŠ¨

**æ¨¡å—åŒ–åŸåˆ™**ï¼š
- æ¯ä¸ª`BossSequenceController`ç®¡ç†ä¸€ä¸ªç‹¬ç«‹çš„æ”»å‡»+ç§»åŠ¨åºåˆ—
- å¤šä¸ªControllerå¯ä»¥åŒæ—¶è¿è¡Œï¼Œäº’ä¸å¹²æ‰°
- é€šè¿‡å¯ç”¨/ç¦ç”¨Controllerå®ç°é˜¶æ®µåˆ‡æ¢

### æ ¸å¿ƒæ–‡ä»¶åˆ—è¡¨

| æ–‡ä»¶ | ä½ç½® | åŠŸèƒ½ |
|------|------|------|
| `BossBase.cs` | Assets/Scripts/Enemy/ | BossåŸºç±»ï¼Œæä¾›æ ¸å¿ƒæ¡†æ¶ï¼ˆç®€åŒ–ç‰ˆï¼‰ |
| `BossSequenceConfig.cs` | Assets/Scripts/Enemy/ | åºåˆ—é…ç½®ï¼ˆåŒ…å«BeatMapã€æ”»å‡»åºåˆ—ã€ç§»åŠ¨åºåˆ—ï¼‰ |
| `BossSequenceController.cs` | Assets/Scripts/Enemy/ | åºåˆ—æ§åˆ¶å™¨ï¼ˆèŠ‚æ‹é©±åŠ¨ï¼‰ |
| `BossAttackConfig.cs` | Assets/Scripts/Enemy/ | æ”»å‡»æ•°æ®ç»“æ„ï¼ˆä¿ç•™ç”¨äºå‘åå…¼å®¹ï¼‰ |
| `EmitterPoint.cs` | Assets/Scripts/Enemy/ | å‘å°„æºæ ‡è®°ç»„ä»¶ |
| `EmitterType.cs` | Assets/Scripts/Enemy/ | å‘å°„æºç±»å‹æšä¸¾ |
| `ExampleBoss.cs` | Assets/Scripts/Enemy/ | ç¤ºä¾‹Bosså®ç° |

---

## æ ¸å¿ƒæ¶æ„

### ç³»ç»Ÿæ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         Boss GameObject                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ BossBase (æŠ½è±¡åŸºç±»)                                     â”‚ â”‚
â”‚  â”‚  - å¥åº·ç®¡ç†                                             â”‚ â”‚
â”‚  â”‚  - é˜¶æ®µç³»ç»Ÿ                                             â”‚ â”‚
â”‚  â”‚  - å‘å°„æºç®¡ç†                                           â”‚ â”‚
â”‚  â”‚  - æ”»å‡»æ‰§è¡Œæ–¹æ³•                                         â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ BossSequenceController #1                              â”‚ â”‚
â”‚  â”‚  - è®¢é˜… BeatMapPlayer.OnBeat                           â”‚ â”‚
â”‚  â”‚  - ç®¡ç† BossSequenceConfig #1                          â”‚ â”‚
â”‚  â”‚  - æ¯ä¸ªèŠ‚æ‹æ‰§è¡Œä¸‹ä¸€ä¸ªæ”»å‡»å’Œç§»åŠ¨                        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ BossSequenceController #2                              â”‚ â”‚
â”‚  â”‚  - è®¢é˜… BeatMapPlayer.OnBeat                           â”‚ â”‚
â”‚  â”‚  - ç®¡ç† BossSequenceConfig #2                          â”‚ â”‚
â”‚  â”‚  - æ¯ä¸ªèŠ‚æ‹æ‰§è¡Œä¸‹ä¸€ä¸ªæ”»å‡»å’Œç§»åŠ¨                        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ EmitterPoint (å­ç‰©ä½“)                                   â”‚ â”‚
â”‚  â”‚  - MainCore / LeftHand / RightHand / ...               â”‚ â”‚
â”‚  â”‚  - å¯ä»¥ç‹¬ç«‹ç§»åŠ¨                                         â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â”‚ è®¢é˜…èŠ‚æ‹äº‹ä»¶
                            â–¼
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚ BeatMapPlayer    â”‚
                  â”‚  - æ’­æ”¾BeatMap   â”‚
                  â”‚  - è§¦å‘OnBeat    â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â”‚ åŸºäºåŒä¸€é¦–BGM
                            â–¼
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚ BGMManager       â”‚
                  â”‚  - æ’­æ”¾BGM       â”‚
                  â”‚  - æä¾›DSPæ—¶é—´   â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ç±»å›¾å…³ç³»

```
BossBase (æŠ½è±¡åŸºç±»)
    â”œâ”€â”€ å®ç° IHealth æ¥å£
    â”œâ”€â”€ å®ç° IDamageable æ¥å£
    â”œâ”€â”€ ç®¡ç† Dictionary<EmitterType, EmitterPoint>
    â”œâ”€â”€ æä¾› ExecuteAttackAction(BossAttackAction)
    â”œâ”€â”€ æä¾› GetEmitter(EmitterType)
    â”œâ”€â”€ æä¾› ExecuteCustomMove(EmitterType, int)
    â””â”€â”€ è¢« ExampleBoss ç»§æ‰¿

BossSequenceConfig (ScriptableObject)
    â”œâ”€â”€ åŒ…å« BeatMap å¼•ç”¨
    â”œâ”€â”€ åŒ…å« BossAttackAction[] æ”»å‡»åºåˆ—
    â””â”€â”€ åŒ…å« EmitterMoveData[] ç§»åŠ¨åºåˆ—

BossSequenceController (MonoBehaviour)
    â”œâ”€â”€ è®¢é˜… BeatMapPlayer.OnBeat äº‹ä»¶
    â”œâ”€â”€ ç®¡ç†ä¸€ä¸ª BossSequenceConfig
    â”œâ”€â”€ ç»´æŠ¤æ”»å‡»ç´¢å¼•å’Œç§»åŠ¨ç´¢å¼•
    â””â”€â”€ æ¯ä¸ªèŠ‚æ‹æ‰§è¡Œä¸‹ä¸€ä¸ªæ”»å‡»å’Œç§»åŠ¨

EmitterPoint (MonoBehaviour)
    â”œâ”€â”€ æ ‡è®°å‘å°„æºä½ç½®
    â”œâ”€â”€ æä¾› Position å±æ€§
    â””â”€â”€ å¯ä»¥è¢« BossSequenceController ç§»åŠ¨
```

### BossçŠ¶æ€æœº

Bossæœ‰ä¸‰ä¸ªä¸»è¦çŠ¶æ€ï¼š

```csharp
public enum BossState
{
    Idle,       // ç©ºé—²çŠ¶æ€
    Fighting,   // æˆ˜æ–—ä¸­
    Defeated    // è¢«å‡»è´¥
}
```

**çŠ¶æ€è½¬æ¢æµç¨‹ï¼š**
1. `Idle` â†’ `Fighting`ï¼šè°ƒç”¨ `StartBattle()` æ—¶
2. `Fighting` â†’ `Defeated`ï¼šè¡€é‡é™è‡³0æ—¶
3. åªæœ‰åœ¨ `Fighting` çŠ¶æ€ä¸‹æ‰èƒ½å—åˆ°ä¼¤å®³å’Œæ‰§è¡Œæ”»å‡»

---

## åºåˆ—é…ç½®ç³»ç»Ÿ

### BossSequenceConfigï¼ˆScriptableObjectï¼‰

`BossSequenceConfig` æ˜¯æ–°ç³»ç»Ÿçš„æ ¸å¿ƒé…ç½®æ–‡ä»¶ï¼ŒåŒ…å«äº†å®Œæ•´çš„æ”»å‡»å’Œç§»åŠ¨åºåˆ—ã€‚

**æ–‡ä»¶ä½ç½®ï¼š** [BossSequenceConfig.cs](Assets/Scripts/Enemy/BossSequenceConfig.cs)

#### æ ¸å¿ƒç»“æ„

```csharp
[CreateAssetMenu(fileName = "BossSequenceConfig", menuName = "DodgeDots/Boss Sequence Config")]
public class BossSequenceConfig : ScriptableObject
{
    [Header("é…ç½®ä¿¡æ¯")]
    public string configName = "Boss Sequence Config";

    [Header("æ”»å‡»åºåˆ—")]
    public BossAttackAction[] attackSequence;  // æ”»å‡»åºåˆ—
    public bool loopAttackSequence = true;     // æ˜¯å¦å¾ªç¯

    [Header("ç§»åŠ¨åºåˆ—")]
    public EmitterMoveData[] moveSequence;     // ç§»åŠ¨åºåˆ—
    public bool loopMoveSequence = true;       // æ˜¯å¦å¾ªç¯
}
```

#### é…ç½®å‚æ•°è¯´æ˜

| å‚æ•° | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| `configName` | string | é…ç½®åç§°ï¼ˆç”¨äºè°ƒè¯•ï¼‰ |
| `attackSequence` | BossAttackAction[] | æ”»å‡»åºåˆ—ï¼Œæ¯ä¸ªèŠ‚æ‹æ‰§è¡Œä¸‹ä¸€ä¸ª |
| `loopAttackSequence` | bool | æ”»å‡»åºåˆ—æ˜¯å¦å¾ªç¯ |
| `moveSequence` | EmitterMoveData[] | ç§»åŠ¨åºåˆ—ï¼Œæ¯ä¸ªèŠ‚æ‹æ‰§è¡Œä¸‹ä¸€ä¸ª |
| `loopMoveSequence` | bool | ç§»åŠ¨åºåˆ—æ˜¯å¦å¾ªç¯ |

**é‡è¦è¯´æ˜**ï¼š
- BossSequenceConfig **ä¸åŒ…å«** BeatMap å¼•ç”¨
- BeatMap ç”± **BeatMapPlayer** æŒ‚è½½å’Œç®¡ç†
- BossSequenceController è®¢é˜… BeatMapPlayer çš„èŠ‚æ‹äº‹ä»¶æ¥é©±åŠ¨åºåˆ—æ‰§è¡Œ

### BossAttackActionï¼ˆæ”»å‡»åŠ¨ä½œï¼‰

`BossAttackAction` æ˜¯ç®€åŒ–çš„æ”»å‡»æ•°æ®ç»“æ„ï¼Œ**ä¸åŒ…å«ç§»åŠ¨å‚æ•°**ã€‚

**æ–‡ä»¶ä½ç½®ï¼š** [BossSequenceConfig.cs](Assets/Scripts/Enemy/BossSequenceConfig.cs)

#### æ ¸å¿ƒç»“æ„

```csharp
[System.Serializable]
public class BossAttackAction
{
    [Header("åŸºç¡€è®¾ç½®")]
    public string attackName = "Attack";

    [Header("å‘å°„æºè®¾ç½®")]
    public EmitterType emitterType = EmitterType.MainCore;
    public bool useMultipleEmitters = false;
    public EmitterType[] multipleEmitters = new EmitterType[0];

    [Header("æ”»å‡»ç±»å‹")]
    public BossAttackType attackType = BossAttackType.Circle;
    public BulletConfig bulletConfig;

    // å„ç§æ”»å‡»ç±»å‹çš„å‚æ•°ï¼ˆCircleã€Fanã€Singleã€Aimingç­‰ï¼‰
    // ...
}
```

#### å…³é”®ç‰¹ç‚¹

- **ä¸åŒ…å«ç§»åŠ¨å‚æ•°**ï¼šç§»åŠ¨é€»è¾‘å®Œå…¨ç‹¬ç«‹
- **æ”¯æŒå¤šå‘å°„æº**ï¼šå¯ä»¥ä»å¤šä¸ªå‘å°„æºåŒæ—¶å‘å°„
- **ç®€åŒ–çš„ç»“æ„**ï¼šåªå…³æ³¨æ”»å‡»æœ¬èº«

### EmitterMoveDataï¼ˆç§»åŠ¨æ•°æ®ï¼‰

`EmitterMoveData` å®šä¹‰å•ä¸ªå‘å°„æºçš„ç§»åŠ¨è¡Œä¸ºã€‚

**æ–‡ä»¶ä½ç½®ï¼š** [BossAttackConfig.cs](Assets/Scripts/Enemy/BossAttackConfig.cs)

#### æ ¸å¿ƒç»“æ„

```csharp
[System.Serializable]
public class EmitterMoveData
{
    [Header("å‘å°„æº")]
    public EmitterType emitterType = EmitterType.MainCore;

    [Header("ç§»åŠ¨è®¾ç½®")]
    public BossMoveType moveType = BossMoveType.None;
    public float moveDuration = 1f;
    public float moveSpeed = 5f;

    // ToPositionæ¨¡å¼
    public Vector2 targetPosition = Vector2.zero;

    // ByDirectionæ¨¡å¼
    public float moveDirection = 0f;
    public float moveDistance = 5f;

    // Customæ¨¡å¼
    public int customMoveId = 0;
}
```

#### ç§»åŠ¨ç±»å‹

```csharp
public enum BossMoveType
{
    None,           // ä¸ç§»åŠ¨
    ToPosition,     // ç§»åŠ¨åˆ°ç›®æ ‡ä½ç½®
    ByDirection,    // æ²¿æ–¹å‘ç§»åŠ¨
    Custom          // è‡ªå®šä¹‰ç§»åŠ¨
}
```

---

## åºåˆ—æ§åˆ¶å™¨

### BossSequenceController

`BossSequenceController` æ˜¯æ–°ç³»ç»Ÿçš„æ ¸å¿ƒæ§åˆ¶å™¨ï¼Œè´Ÿè´£è®¢é˜…èŠ‚æ‹äº‹ä»¶å¹¶æ‰§è¡Œæ”»å‡»å’Œç§»åŠ¨ã€‚

**æ–‡ä»¶ä½ç½®ï¼š** [BossSequenceController.cs](Assets/Scripts/Enemy/BossSequenceController.cs)

#### æ ¸å¿ƒåŠŸèƒ½

1. **è®¢é˜…èŠ‚æ‹äº‹ä»¶**ï¼šè®¢é˜… `BeatMapPlayer.OnBeat` äº‹ä»¶
2. **æ‰§è¡Œæ”»å‡»åºåˆ—**ï¼šæ¯ä¸ªèŠ‚æ‹æ‰§è¡Œä¸‹ä¸€ä¸ªæ”»å‡»
3. **æ‰§è¡Œç§»åŠ¨åºåˆ—**ï¼šæ¯ä¸ªèŠ‚æ‹æ‰§è¡Œä¸‹ä¸€ä¸ªç§»åŠ¨
4. **æ”¯æŒå¾ªç¯**ï¼šæ”»å‡»å’Œç§»åŠ¨åºåˆ—å¯ä»¥ç‹¬ç«‹å¾ªç¯
5. **é˜²æ­¢é‡å¤è§¦å‘**ï¼šä½¿ç”¨ `_lastHandledBeat` é˜²æ­¢é‡å¤å¤„ç†

#### æ ¸å¿ƒä»£ç 

**èŠ‚æ‹å¤„ç†ï¼š**

```csharp
void HandleBeat(int beatIndex)
{
    // é˜²æ­¢é‡å¤å¤„ç†
    if (beatIndex <= _lastHandledBeat)
    {
        return;
    }
    _lastHandledBeat = beatIndex;

    // æ‰§è¡Œæ”»å‡»
    ExecuteNextAttack();

    // æ‰§è¡Œç§»åŠ¨
    ExecuteNextMove();
}
```

**æ”»å‡»æ‰§è¡Œï¼š**

```csharp
void ExecuteNextAttack()
{
    if (sequenceConfig.attackSequence == null ||
        sequenceConfig.attackSequence.Length == 0)
    {
        return;
    }

    // è·å–å½“å‰æ”»å‡»
    BossAttackAction attackAction = sequenceConfig.attackSequence[_attackIndex];

    // è°ƒç”¨BossBaseæ‰§è¡Œæ”»å‡»
    bossBase.ExecuteAttackAction(attackAction);

    // æ¨è¿›æ”»å‡»ç´¢å¼•
    _attackIndex++;
    if (_attackIndex >= sequenceConfig.attackSequence.Length)
    {
        if (sequenceConfig.loopAttackSequence)
        {
            _attackIndex = 0;
        }
        else
        {
            _attackIndex = sequenceConfig.attackSequence.Length - 1;
        }
    }
}
```

**ç§»åŠ¨æ‰§è¡Œï¼š**

```csharp
void ExecuteNextMove()
{
    if (sequenceConfig.moveSequence == null ||
        sequenceConfig.moveSequence.Length == 0)
    {
        return;
    }

    // è·å–å½“å‰ç§»åŠ¨
    EmitterMoveData moveData = sequenceConfig.moveSequence[_moveIndex];

    // æ‰§è¡Œç§»åŠ¨
    ExecuteMove(moveData);

    // æ¨è¿›ç§»åŠ¨ç´¢å¼•
    _moveIndex++;
    if (_moveIndex >= sequenceConfig.moveSequence.Length)
    {
        if (sequenceConfig.loopMoveSequence)
        {
            _moveIndex = 0;
        }
        else
        {
            _moveIndex = sequenceConfig.moveSequence.Length - 1;
        }
    }
}
```

**ç§»åŠ¨åç¨‹ï¼š**

```csharp
IEnumerator MoveCoroutine(Transform target, EmitterMoveData moveData)
{
    Vector3 startPosition = target.position;
    Vector3 targetPosition = startPosition;

    // è®¡ç®—ç›®æ ‡ä½ç½®
    switch (moveData.moveType)
    {
        case BossMoveType.ToPosition:
            targetPosition = moveData.targetPosition;
            break;

        case BossMoveType.ByDirection:
            Vector2 direction = new Vector2(
                Mathf.Cos(moveData.moveDirection * Mathf.Deg2Rad),
                Mathf.Sin(moveData.moveDirection * Mathf.Deg2Rad)
            );
            targetPosition = startPosition + (Vector3)(direction * moveData.moveDistance);
            break;

        case BossMoveType.Custom:
            bossBase.ExecuteCustomMove(moveData.emitterType, moveData.customMoveId);
            yield break;
    }

    // å¹³æ»‘ç§»åŠ¨ï¼ˆLerpï¼‰
    float elapsedTime = 0f;
    while (elapsedTime < moveData.moveDuration)
    {
        elapsedTime += Time.deltaTime;
        float t = elapsedTime / moveData.moveDuration;
        target.position = Vector3.Lerp(startPosition, targetPosition, t);
        yield return null;
    }

    // ç¡®ä¿åˆ°è¾¾ç›®æ ‡ä½ç½®
    target.position = targetPosition;
}
```

#### å…³é”®ç‰¹ç‚¹

- **æ¯ä¸ªèŠ‚æ‹åŒæ—¶æ‰§è¡Œæ”»å‡»å’Œç§»åŠ¨**ï¼šæ”»å‡»å’Œç§»åŠ¨æ˜¯å¹¶è¡Œçš„
- **ç‹¬ç«‹çš„ç´¢å¼•ç®¡ç†**ï¼šæ”»å‡»ç´¢å¼•å’Œç§»åŠ¨ç´¢å¼•ç‹¬ç«‹ç»´æŠ¤
- **æ”¯æŒå¤šä¸ªæ§åˆ¶å™¨**ï¼šå¯ä»¥åœ¨Bossä¸ŠæŒ‚è½½å¤šä¸ªControllerï¼ŒåŒæ—¶è¿è¡Œ
- **ç§»åŠ¨åç¨‹ç®¡ç†**ï¼šæ¯ä¸ªå‘å°„æºçš„ç§»åŠ¨åç¨‹ç‹¬ç«‹ç®¡ç†ï¼Œé¿å…å†²çª

---

## BossåŸºç±»

### BossBaseï¼ˆç®€åŒ–ç‰ˆï¼‰

`BossBase` ç»è¿‡ç®€åŒ–ï¼Œç§»é™¤äº†è‡ªåŠ¨æ”»å‡»å¾ªç¯å’Œæ”»å‡»å†…åµŒç§»åŠ¨ç³»ç»Ÿã€‚

**æ–‡ä»¶ä½ç½®ï¼š** [BossBase.cs](Assets/Scripts/Enemy/BossBase.cs)

#### æ ¸å¿ƒåŠŸèƒ½

1. **å¥åº·ç®¡ç†**ï¼šå®ç° `IHealth` å’Œ `IDamageable` æ¥å£
2. **é˜¶æ®µç³»ç»Ÿ**ï¼šæ ¹æ®è¡€é‡é˜ˆå€¼è‡ªåŠ¨åˆ‡æ¢é˜¶æ®µ
3. **å‘å°„æºç®¡ç†**ï¼šç®¡ç†æ‰€æœ‰ `EmitterPoint` ç»„ä»¶
4. **æ”»å‡»æ‰§è¡Œ**ï¼šæä¾› `ExecuteAttackAction()` æ–¹æ³•ä¾›Controllerè°ƒç”¨
5. **è‡ªå®šä¹‰ç§»åŠ¨**ï¼šæä¾› `ExecuteCustomMove()` æ–¹æ³•ä¾›Controllerè°ƒç”¨

#### ç®€åŒ–çš„ç»“æ„

**ç§»é™¤çš„å†…å®¹ï¼š**
- âŒ `attackConfig` å­—æ®µï¼ˆä¸å†éœ€è¦ï¼‰
- âŒ `_attackCoroutine` å­—æ®µ
- âŒ `_currentAttackIndex` å­—æ®µ
- âŒ `beatDrivenMode` å­—æ®µ
- âŒ `AttackLoopCoroutine()` æ–¹æ³•
- âŒ `ExecuteAttackCoroutine()` æ–¹æ³•
- âŒ `ExecuteMoveCoroutine()` æ–¹æ³•
- âŒ `TriggerBeatAttack()` æ–¹æ³•
- âŒ `StopAttackLoop()` æ–¹æ³•

**ä¿ç•™çš„å†…å®¹ï¼š**
- âœ… å¥åº·ç®¡ç†ï¼ˆ`TakeDamage()`, `Heal()`, `ResetHealth()`ï¼‰
- âœ… é˜¶æ®µç³»ç»Ÿï¼ˆ`CheckPhaseTransition()`, `EnterPhase()`ï¼‰
- âœ… å‘å°„æºç®¡ç†ï¼ˆ`InitializeEmitters()`, `GetEmitterPosition()`, `GetEmitter()`ï¼‰
- âœ… æ”»å‡»æ‰§è¡Œï¼ˆ`ExecuteAttack()`, `ExecuteSingleEmitterAttack()`ï¼‰
- âœ… çŠ¶æ€ç®¡ç†ï¼ˆ`StartBattle()`, `SetState()`, `OnBossDefeated()`ï¼‰

**æ–°å¢çš„å†…å®¹ï¼š**
- âœ… `ExecuteAttackAction(BossAttackAction)` - æ‰§è¡Œæ”»å‡»åŠ¨ä½œ
- âœ… `ExecuteSingleEmitterAttackAction(BossAttackAction, EmitterType)` - ä»å•ä¸ªå‘å°„æºæ‰§è¡Œæ”»å‡»
- âœ… `GetEmitter(EmitterType)` - è·å–å‘å°„æºç»„ä»¶
- âœ… `ExecuteCustomMove(EmitterType, int)` - æ‰§è¡Œè‡ªå®šä¹‰ç§»åŠ¨

#### æ ¸å¿ƒä»£ç 

**æ‰§è¡Œæ”»å‡»åŠ¨ä½œï¼š**

```csharp
public void ExecuteAttackAction(BossAttackAction attackAction)
{
    if (_currentState != BossState.Fighting || attackAction == null)
    {
        return;
    }

    // æ”¯æŒå¤šå‘å°„æºåŒæ—¶å‘å°„
    if (attackAction.useMultipleEmitters &&
        attackAction.multipleEmitters != null &&
        attackAction.multipleEmitters.Length > 0)
    {
        foreach (EmitterType emitterType in attackAction.multipleEmitters)
        {
            ExecuteSingleEmitterAttackAction(attackAction, emitterType);
        }
    }
    else
    {
        ExecuteSingleEmitterAttackAction(attackAction, attackAction.emitterType);
    }
}
```

**è·å–å‘å°„æºï¼š**

```csharp
public virtual EmitterPoint GetEmitter(EmitterType emitterType)
{
    if (_emitters != null && _emitters.TryGetValue(emitterType, out EmitterPoint emitter))
    {
        return emitter;
    }
    return null;
}
```

**è‡ªå®šä¹‰ç§»åŠ¨ï¼š**

```csharp
public virtual void ExecuteCustomMove(EmitterType emitterType, int customMoveId)
{
    Debug.LogWarning($"è‡ªå®šä¹‰ç§»åŠ¨ {customMoveId} for {emitterType} æœªå®ç°");
}
```

---

## å‘å°„æºç³»ç»Ÿ

### EmitterTypeï¼ˆå‘å°„æºç±»å‹ï¼‰

`EmitterType` æšä¸¾å®šä¹‰äº†Bossèº«ä¸Šä¸åŒçš„å¼¹å¹•å‘å°„ç‚¹ã€‚

**æ–‡ä»¶ä½ç½®ï¼š** [EmitterType.cs](Assets/Scripts/Enemy/EmitterType.cs)

```csharp
public enum EmitterType
{
    MainCore,       // æ ¸å¿ƒ/èº«ä½“ä¸­å¿ƒ
    LeftHand,       // å·¦æ‰‹
    RightHand,      // å³æ‰‹
    LeftWing,       // å·¦ç¿¼
    RightWing,      // å³ç¿¼
    Head,           // å¤´éƒ¨
    Tail,           // å°¾éƒ¨
    Custom1,        // è‡ªå®šä¹‰å‘å°„ç‚¹1
    Custom2,        // è‡ªå®šä¹‰å‘å°„ç‚¹2
    Custom3,        // è‡ªå®šä¹‰å‘å°„ç‚¹3
    Custom4,        // è‡ªå®šä¹‰å‘å°„ç‚¹4
    Custom5         // è‡ªå®šä¹‰å‘å°„ç‚¹5
}
```

### EmitterPointï¼ˆå‘å°„æºæ ‡è®°ç»„ä»¶ï¼‰

`EmitterPoint` æ˜¯ä¸€ä¸ªæ ‡è®°ç»„ä»¶ï¼ŒæŒ‚è½½åœ¨Bossçš„å­ç‰©ä½“ä¸Šï¼Œæ ‡è¯†è¯¥ä½ç½®ä¸ºå¼¹å¹•å‘å°„ç‚¹ã€‚

**æ–‡ä»¶ä½ç½®ï¼š** [EmitterPoint.cs](Assets/Scripts/Enemy/EmitterPoint.cs)

#### æ ¸å¿ƒåŠŸèƒ½

1. **æ ‡è®°å‘å°„æºä½ç½®**ï¼šæ ‡è¯†Bossèº«ä¸Šçš„å‘å°„ç‚¹
2. **æä¾›å®æ—¶ä½ç½®**ï¼šé€šè¿‡ `Position` å±æ€§è·å–å½“å‰ä½ç½®
3. **Sceneè§†å›¾å¯è§†åŒ–**ï¼šåœ¨Sceneè§†å›¾ä¸­æ˜¾ç¤ºå‘å°„æºä½ç½®

#### æ ¸å¿ƒä»£ç 

```csharp
public class EmitterPoint : MonoBehaviour
{
    [SerializeField] private EmitterType emitterType = EmitterType.MainCore;
    [SerializeField] private string emitterName = "Emitter";
    [SerializeField] private bool showGizmo = true;
    [SerializeField] private Color gizmoColor = Color.red;
    [SerializeField] private float gizmoSize = 0.3f;

    public EmitterType EmitterType => emitterType;
    public string EmitterName => emitterName;
    public Vector2 Position => transform.position;  // å®æ—¶ä½ç½®
}
```

#### ä½¿ç”¨æ–¹å¼

1. åœ¨Bossçš„å­ç‰©ä½“ä¸Šæ·»åŠ  `EmitterPoint` ç»„ä»¶
2. è®¾ç½® `emitterType` ä¸ºå¯¹åº”çš„ç±»å‹
3. Bossä¼šåœ¨ `InitializeEmitters()` ä¸­è‡ªåŠ¨æ³¨å†Œæ‰€æœ‰å‘å°„æº
4. å‘å°„æºå¯ä»¥è¢« `BossSequenceController` ç‹¬ç«‹ç§»åŠ¨

---

## é˜¶æ®µç³»ç»Ÿ

### é˜¶æ®µè½¬æ¢æœºåˆ¶

Bossçš„é˜¶æ®µç³»ç»ŸåŸºäºè¡€é‡ç™¾åˆ†æ¯”è‡ªåŠ¨è§¦å‘ï¼Œæ¯ä¸ªé˜¶æ®µå¯ä»¥å¯ç”¨ä¸åŒçš„åºåˆ—æ§åˆ¶å™¨ç»„åˆã€‚

#### é˜¶æ®µé…ç½®

åœ¨BossBaseä¸­é…ç½®é˜¶æ®µé˜ˆå€¼ï¼š

```csharp
[Header("é˜¶æ®µè®¾ç½®")]
[SerializeField] protected List<float> phaseHealthThresholds = new List<float> { 0.7f, 0.3f };
```

**é˜ˆå€¼è¯´æ˜ï¼š**
- é˜ˆå€¼åˆ—è¡¨åº”è¯¥æ˜¯**é™åº**æ’åˆ—
- è¡€é‡ç™¾åˆ†æ¯” â‰¤ 0.7 æ—¶è¿›å…¥é˜¶æ®µ1
- è¡€é‡ç™¾åˆ†æ¯” â‰¤ 0.3 æ—¶è¿›å…¥é˜¶æ®µ2
- é˜¶æ®µ0æ˜¯åˆå§‹é˜¶æ®µï¼ˆè¡€é‡ > 0.7ï¼‰

#### é˜¶æ®µæ£€æµ‹ä»£ç 

```csharp
protected virtual void CheckPhaseTransition(float previousHealth, float currentHealth)
{
    float currentHealthPercent = currentHealth / maxHealth;

    int targetPhase = 0;
    for (int i = 0; i < phaseHealthThresholds.Count; i++)
    {
        if (currentHealthPercent <= phaseHealthThresholds[i])
        {
            targetPhase = i + 1;
        }
        else
        {
            break;
        }
    }

    if (targetPhase > _currentPhase)
    {
        EnterPhase(targetPhase);
    }
}
```

### ExampleBossä¸­çš„é˜¶æ®µç®¡ç†

#### é…ç½®æ–¹å¼

```csharp
[Header("é˜¶æ®µåºåˆ—æ§åˆ¶å™¨é…ç½®")]
[SerializeField] private List<BossSequenceController> phase0Controllers;
[SerializeField] private List<BossSequenceController> phase1Controllers;
[SerializeField] private List<BossSequenceController> phase2Controllers;
```

#### é˜¶æ®µåˆ‡æ¢å®ç°

```csharp
protected override void OnPhaseEnter(int phase)
{
    DisableAllControllers();

    switch (phase)
    {
        case 0:
            EnableControllers(phase0Controllers);
            break;
        case 1:
            EnableControllers(phase1Controllers);
            break;
        case 2:
            EnableControllers(phase2Controllers);
            break;
    }
}
```

---

## æ”»å‡»ç±»å‹è¯¦è§£

### æ”¯æŒçš„æ”»å‡»ç±»å‹

```csharp
public enum BossAttackType
{
    Circle,         // åœ†å½¢å¼¹å¹•
    Fan,            // æ‰‡å½¢å¼¹å¹•
    Single,         // å•å‘å­å¼¹
    Aiming,         // è‡ªæœºç‹™ï¼ˆç„å‡†ç©å®¶ï¼‰
    Custom          // è‡ªå®šä¹‰æ”»å‡»
}
```

### 1. Circleï¼ˆåœ†å½¢å¼¹å¹•ï¼‰

ä»å‘å°„æºå‘å››å‘¨å‘å°„å‡åŒ€åˆ†å¸ƒçš„å­å¼¹ã€‚

**é…ç½®å‚æ•°ï¼š**
- `circleCount`ï¼šåœ†å½¢å¼¹å¹•çš„å­å¼¹æ•°é‡
- `circleStartAngle`ï¼šèµ·å§‹è§’åº¦ï¼ˆåº¦ï¼Œ0=å³ï¼Œ90=ä¸Šï¼‰

### 2. Fanï¼ˆæ‰‡å½¢å¼¹å¹•ï¼‰

å‘æŒ‡å®šæ–¹å‘å‘å°„æ‰‡å½¢åˆ†å¸ƒçš„å­å¼¹ã€‚

**é…ç½®å‚æ•°ï¼š**
- `fanCount`ï¼šæ‰‡å½¢å¼¹å¹•çš„å­å¼¹æ•°é‡
- `fanSpreadAngle`ï¼šæ‰©æ•£è§’åº¦ï¼ˆåº¦ï¼‰
- `fanCenterAngle`ï¼šä¸­å¿ƒæ–¹å‘ï¼ˆ0=å³ï¼Œ90=ä¸Šï¼Œ180=å·¦ï¼Œ270=ä¸‹ï¼‰

### 3. Singleï¼ˆå•å‘å­å¼¹ï¼‰

å‘æŒ‡å®šæ–¹å‘å‘å°„å•ä¸ªå­å¼¹ã€‚

**é…ç½®å‚æ•°ï¼š**
- `singleDirection`ï¼šå‘å°„æ–¹å‘è§’åº¦ï¼ˆ0=å³ï¼Œ90=ä¸Šï¼Œ180=å·¦ï¼Œ270=ä¸‹ï¼‰

### 4. Aimingï¼ˆè‡ªæœºç‹™ï¼‰

ç„å‡†ç©å®¶ä½ç½®å‘å°„å­å¼¹ï¼Œæ”¯æŒé¢„åˆ¤ç©å®¶ç§»åŠ¨ã€‚

**é…ç½®å‚æ•°ï¼š**
- `aimingBulletCount`ï¼šå­å¼¹æ•°é‡
- `aimingSpreadAngle`ï¼šæ‰©æ•£è§’åº¦ï¼ˆ0=ç²¾ç¡®ç„å‡†ï¼‰
- `aimingPredictMovement`ï¼šæ˜¯å¦é¢„åˆ¤ç©å®¶ç§»åŠ¨

---

## é…ç½®å’Œä½¿ç”¨

### åŸºç¡€é…ç½®æµç¨‹

#### 1. åˆ›å»ºBossSequenceConfig

åœ¨Unityç¼–è¾‘å™¨ä¸­ï¼š
1. å³é”® â†’ Create â†’ DodgeDots â†’ Boss Sequence Config
2. é…ç½®æ”»å‡»åºåˆ—ï¼ˆBossAttackActionæ•°ç»„ï¼‰
3. é…ç½®ç§»åŠ¨åºåˆ—ï¼ˆEmitterMoveDataæ•°ç»„ï¼‰
4. è®¾ç½®æ˜¯å¦å¾ªç¯

**æ³¨æ„**ï¼šBossSequenceConfig ä¸éœ€è¦é…ç½® BeatMapï¼ŒBeatMap ç”± BeatMapPlayer ç®¡ç†

#### 2. è®¾ç½®å‘å°„æº

åœ¨Bossçš„å­ç‰©ä½“ä¸Šï¼š
1. åˆ›å»ºç©ºç‰©ä½“ï¼ˆå¦‚ "LeftHand"ï¼‰
2. æ·»åŠ  `EmitterPoint` ç»„ä»¶
3. è®¾ç½® `emitterType` ä¸ºå¯¹åº”ç±»å‹
4. è°ƒæ•´ä½ç½®åˆ°åˆé€‚çš„å‘å°„ç‚¹

#### 3. é…ç½®Boss

åœ¨Boss GameObjectä¸Šï¼š
1. æ·»åŠ Bossè„šæœ¬ï¼ˆç»§æ‰¿è‡ªBossBaseï¼‰
2. è®¾ç½® `maxHealth`ã€`bossName` ç­‰åŸºç¡€å±æ€§
3. é…ç½® `phaseHealthThresholds`ï¼ˆå¦‚ [0.7f, 0.3f]ï¼‰
4. æ·»åŠ å¤šä¸ª `BossSequenceController` ç»„ä»¶
5. ä¸ºæ¯ä¸ªControlleråˆ†é… `BossSequenceConfig`

#### 4. é…ç½®é˜¶æ®µæ§åˆ¶å™¨

åœ¨Bossè„šæœ¬ä¸­ï¼š
1. åˆ›å»ºä¸åŒé˜¶æ®µçš„Controlleråˆ—è¡¨
2. åœ¨ `OnPhaseEnter()` ä¸­å¯ç”¨/ç¦ç”¨å¯¹åº”çš„Controller
3. åˆ‡æ¢é˜¶æ®µæ—¶é‡ç½®åºåˆ—

### é…ç½®ç¤ºä¾‹

#### ç¤ºä¾‹1ï¼šç®€å•çš„åœ†å½¢å¼¹å¹•Boss

**BossSequenceConfigé…ç½®ï¼š**
```
configName: "Simple Circle Pattern"
attackSequence:
  - attackName: "Circle 16"
    emitterType: MainCore
    attackType: Circle
    circleCount: 16
    circleStartAngle: 0
moveSequence: []  // ä¸ç§»åŠ¨
```

**BeatMapPlayeré…ç½®ï¼š**
```
beatMap: [BeatMapå¼•ç”¨]
bgmManager: [BGMManagerå¼•ç”¨]
autoStart: true
```

#### ç¤ºä¾‹2ï¼šå¤šå‘å°„æºæ‰‡å½¢æ”»å‡»

**BossSequenceConfigé…ç½®ï¼š**
```
configName: "Triple Fan Pattern"
attackSequence:
  - attackName: "Triple Fan"
    useMultipleEmitters: true
    multipleEmitters: [MainCore, LeftHand, RightHand]
    attackType: Fan
    fanCount: 7
    fanSpreadAngle: 60
    fanCenterAngle: 270
moveSequence: []  // ä¸ç§»åŠ¨
```

#### ç¤ºä¾‹3ï¼šæ”»å‡»+ç§»åŠ¨ç»„åˆ

**BossSequenceConfigé…ç½®ï¼š**
```
attackSequence:
  - attackName: "Aimed Shot"
    emitterType: MainCore
    attackType: Aiming
    aimingBulletCount: 3
    aimingSpreadAngle: 15

moveSequence:
  - emitterType: MainCore
    moveType: ToPosition
    targetPosition: (0, 2)
    moveDuration: 1.0
  - emitterType: MainCore
    moveType: ToPosition
    targetPosition: (2, 0)
    moveDuration: 1.0
```

---

## æœ€ä½³å®è·µ

### ç³»ç»Ÿè®¾è®¡åŸåˆ™

1. **æ”»å‡»ä¸ç§»åŠ¨åˆ†ç¦»**ï¼š
   - âœ… æ”»å‡»åºåˆ—åªå…³æ³¨æ”»å‡»é€»è¾‘
   - âœ… ç§»åŠ¨åºåˆ—åªå…³æ³¨ç§»åŠ¨é€»è¾‘
   - âœ… ä¸¤è€…ç‹¬ç«‹é…ç½®ï¼Œäº’ä¸å¹²æ‰°

2. **å¤šåºåˆ—å åŠ **ï¼š
   - âœ… ä½¿ç”¨å¤šä¸ªControllerå®ç°å¤æ‚è¡Œä¸º
   - âœ… æ¯ä¸ªControllerç®¡ç†ä¸€ä¸ªç‹¬ç«‹çš„åºåˆ—
   - âœ… é€šè¿‡å¯ç”¨/ç¦ç”¨Controllerå®ç°é˜¶æ®µåˆ‡æ¢

3. **èŠ‚æ‹é©±åŠ¨**ï¼š
   - âœ… æ‰€æœ‰æ”»å‡»å’Œç§»åŠ¨éƒ½ç”±BeatMapé©±åŠ¨
   - âœ… ç¡®ä¿æ‰€æœ‰BeatMapåŸºäºåŒä¸€é¦–BGMé…ç½®
   - âœ… ä½¿ç”¨BeatMapPlayerç»Ÿä¸€ç®¡ç†èŠ‚æ‹äº‹ä»¶

### é…ç½®å»ºè®®

#### æ”»å‡»åºåˆ—è®¾è®¡

```
âœ… æ¨èï¼š
- æ”»å‡»åºåˆ—é•¿åº¦ä¸BeatMapèŠ‚æ‹æ•°åŒ¹é…
- ä½¿ç”¨æœ‰æ„ä¹‰çš„attackNameä¾¿äºè°ƒè¯•
- åˆç†ä½¿ç”¨å¤šå‘å°„æºå¢åŠ å¼¹å¹•å¯†åº¦

âŒ é¿å…ï¼š
- æ”»å‡»åºåˆ—è¿‡çŸ­å¯¼è‡´é¢‘ç¹å¾ªç¯
- æ‰€æœ‰æ”»å‡»ä½¿ç”¨ç›¸åŒå‚æ•°ç¼ºä¹å˜åŒ–
- è¿‡åº¦ä½¿ç”¨å¤šå‘å°„æºå¯¼è‡´æ€§èƒ½é—®é¢˜
```

#### ç§»åŠ¨åºåˆ—è®¾è®¡

```
âœ… æ¨èï¼š
- ç§»åŠ¨åºåˆ—é•¿åº¦å¯ä»¥ä¸æ”»å‡»åºåˆ—ä¸åŒ
- ä½¿ç”¨ToPositionå®ç°ç²¾ç¡®ä½ç½®æ§åˆ¶
- ä½¿ç”¨ByDirectionå®ç°ç›¸å¯¹ç§»åŠ¨

âŒ é¿å…ï¼š
- moveDurationè¿‡çŸ­å¯¼è‡´ç§»åŠ¨è¿‡å¿«
- é¢‘ç¹ç§»åŠ¨å¯¼è‡´ç©å®¶éš¾ä»¥ç„å‡†
- ç§»åŠ¨èŒƒå›´è¶…å‡ºæ¸¸æˆåŒºåŸŸ
```

#### é˜¶æ®µç³»ç»Ÿä½¿ç”¨

```
âœ… æ¨èï¼š
- é˜ˆå€¼è®¾ç½®åˆç†ï¼ˆå¦‚ [0.7f, 0.3f]ï¼‰
- æ¯ä¸ªé˜¶æ®µä½¿ç”¨ä¸åŒçš„Controllerç»„åˆ
- é˜¶æ®µåˆ‡æ¢æ—¶é‡ç½®åºåˆ—ç´¢å¼•

âŒ é¿å…ï¼š
- é˜ˆå€¼è®¾ç½®è¿‡äºæ¥è¿‘ï¼ˆå¦‚ [0.7f, 0.69f]ï¼‰
- é˜¶æ®µè¿‡å¤šå¯¼è‡´æ¯ä¸ªé˜¶æ®µæ—¶é—´è¿‡çŸ­
- é˜¶æ®µè½¬æ¢æ—¶æ²¡æœ‰è§†è§‰åé¦ˆ
```

### æ€§èƒ½ä¼˜åŒ–

1. **å­å¼¹æ± åŒ–**ï¼šç¡®ä¿BulletManagerä½¿ç”¨å¯¹è±¡æ± 
2. **æ§åˆ¶å™¨æ•°é‡**ï¼šå»ºè®®æ¯ä¸ªé˜¶æ®µä¸è¶…è¿‡3-4ä¸ªController
3. **å‘å°„æºæ•°é‡**ï¼šå»ºè®®ä¸è¶…è¿‡5ä¸ªå‘å°„æº
4. **æ”»å‡»é¢‘ç‡**ï¼šæ§åˆ¶æ¯ç§’å‘å°„çš„å­å¼¹æ€»æ•°

### è°ƒè¯•æŠ€å·§

1. **ä½¿ç”¨è°ƒè¯•æ—¥å¿—**ï¼šåœ¨BossSequenceControllerä¸­å¯ç”¨ `showDebugLog`
2. **Sceneè§†å›¾å¯è§†åŒ–**ï¼šEmitterPointçš„Gizmoå¯ä»¥æ˜¾ç¤ºå‘å°„æºä½ç½®
3. **åˆ†é˜¶æ®µæµ‹è¯•**ï¼šå…ˆæµ‹è¯•å•ä¸ªControllerï¼Œå†æµ‹è¯•å¤šä¸ªControllerç»„åˆ
4. **BeatMapå¯¹é½**ï¼šç¡®ä¿BeatMapçš„èŠ‚æ‹æ—¶é—´ä¸BGMå¯¹é½

---

## æ€»ç»“

### æ–°ç³»ç»Ÿçš„ä¼˜åŠ¿

1. **ç®€åŒ–**ï¼šç§»é™¤äº†å¤æ‚çš„è‡ªåŠ¨æ”»å‡»å¾ªç¯å’Œå¤šå±‚ç§»åŠ¨ç³»ç»Ÿ
2. **ç»Ÿä¸€**ï¼šæ‰€æœ‰æ”»å‡»å’Œç§»åŠ¨éƒ½ç”±èŠ‚æ‹é©±åŠ¨ï¼Œé€»è¾‘æ¸…æ™°
3. **çµæ´»**ï¼šæ”¯æŒå¤šä¸ªåºåˆ—æ§åˆ¶å™¨å åŠ ï¼Œå®ç°å¤æ‚Bossè¡Œä¸º
4. **æ˜“ç”¨**ï¼šé…ç½®é©±åŠ¨ï¼Œæ— éœ€ç¼–å†™ä»£ç å³å¯è®¾è®¡Boss

### ä¸æ—§ç³»ç»Ÿçš„å¯¹æ¯”

| ç‰¹æ€§ | æ—§ç³»ç»Ÿ | æ–°ç³»ç»Ÿ |
|------|--------|--------|
| æ”»å‡»é©±åŠ¨ | è‡ªåŠ¨å¾ªç¯ + èŠ‚æ‹é©±åŠ¨ | ç»Ÿä¸€èŠ‚æ‹é©±åŠ¨ |
| ç§»åŠ¨ç³»ç»Ÿ | æ”»å‡»å†…åµŒ + æ—¶é—´è½´ | èŠ‚æ‹é©±åŠ¨ç§»åŠ¨åºåˆ— |
| é…ç½®å¤æ‚åº¦ | é«˜ï¼ˆå¤šä¸ªæ§åˆ¶å™¨ç±»å‹ï¼‰ | ä½ï¼ˆå•ä¸€æ§åˆ¶å™¨ç±»å‹ï¼‰ |
| å¤šåºåˆ—æ”¯æŒ | æœ‰é™ | å®Œå…¨æ”¯æŒ |
| é˜¶æ®µåˆ‡æ¢ | åˆ‡æ¢Config | å¯ç”¨/ç¦ç”¨Controller |

### å¿«é€Ÿå‚è€ƒ

**æ ¸å¿ƒç±»ï¼š**
- `BossBase` - BossåŸºç±»
- `BossSequenceConfig` - åºåˆ—é…ç½®
- `BossSequenceController` - åºåˆ—æ§åˆ¶å™¨
- `EmitterPoint` - å‘å°„æºæ ‡è®°

**æ ¸å¿ƒæ–¹æ³•ï¼š**
- `ExecuteAttackAction()` - æ‰§è¡Œæ”»å‡»
- `GetEmitter()` - è·å–å‘å°„æº
- `ExecuteCustomMove()` - è‡ªå®šä¹‰ç§»åŠ¨
- `ResetSequence()` - é‡ç½®åºåˆ—

---

**æ–‡æ¡£ç‰ˆæœ¬ï¼š** 2.0ï¼ˆé‡æ„ç‰ˆï¼‰
**æœ€åæ›´æ–°ï¼š** 2026-02-07
**é€‚ç”¨ç‰ˆæœ¬ï¼š** DodgeDots Boss System v2.x

